<!DOCTYPE html>
<html>
<head>
    <title>Token Test</title>
</head>
<body>
    <h1>Token Test</h1>
    <div id="output"></div>
    
    <script>
        const output = document.getElementById('output');
        
        // Get token from URL
        const params = new URLSearchParams(window.location.search);
        const token = params.get('token');
        
        if (token) {
            output.innerHTML += `<p>Token received: ${token.substring(0, 20)}...</p>`;
            
            // Test API call
            fetch('http://localhost:8080/api/user/me', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
            .then(res => res.json())
            .then(data => {
                output.innerHTML += `<p>API Response: ${JSON.stringify(data, null, 2)}</p>`;
            })
            .catch(err => {
                output.innerHTML += `<p>Error: ${err.message}</p>`;
            });
        } else {
            output.innerHTML = '<p>No token in URL</p>';
        }
    </script>
</body>
</html>
